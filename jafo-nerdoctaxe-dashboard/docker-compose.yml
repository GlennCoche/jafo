# NerdOctaxe Dashboard (Next.js) â€” Umbrel OS (store Jafo)
# Image multi-arch obligatoire : utiliser build-and-push.sh depuis dashboard-next/.
# app_proxy : requis par Umbrel pour le routage (APP_HOST = nom du service server).

services:
  app_proxy:
    environment:
      APP_HOST: jafo-nerdoctaxe-dashboard_server_1
      APP_PORT: 3000

  server:
    image: glenncoche/nerdoctaxe-dashboard:2.3.0
    user: "1001:1001"
    init: true
    restart: on-failure
    ports:
      - "3000:3000"
    environment:
      MINER_IP: ${MINER_IP:-192.168.1.37}
      STRATUMX_PROFILE_PATH: ${STRATUMX_PROFILE_PATH:-/app/data/jafo-mining-profile.json}
      STRATUMX_PROFILE_URL: ${STRATUMX_PROFILE_URL:-}
      QUAISCAN_API_BASE: ${QUAISCAN_API_BASE:-https://quaiscan.io}
      COINGECKO_QUAI_ID: ${COINGECKO_QUAI_ID:-quai-network}
    volumes:
      - ${APP_DATA_DIR:-./data}:/app/data
